# Values for saorpg-roller-db.
# These are user-specified values. This helm chart is not intended for re-use.

# This will set the instance count for the PostgreSQL clusters more information can be found here: https://cloudnative-pg.io/documentation/1.19/operator_capability_levels/#replica-configuration
instanceCount: 2

# This will set the database cluster size more information can be found here: https://cloudnative-pg.io/documentation/1.19/storage
storageSize: 5Gi
storageClass: do-block-storage #-retain

# This is to override the chart name.
nameOverride: ""
fullnameOverride: ""

resources:
  # Each PostgreSQL instance will use 256Mi of memory and normally request 150 millicores of CPU and begin throttling at 500 millicores.
  requests:
    cpu: 150m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 256Mi

postgresqlConf:
  # Generated using PGTune at url: https://pgtune.leopard.in.ua with following settings
  # DB version: 17
  # OS Type: Linux
  # DB Type: Web application
  # Total Memory (RAM): 256MB
  # Number of CPUs: 1
  # Number of Connections: 50
  # Data Storage: Network (SAN) storage
  parameters:
    max_connections: "50"
    shared_buffers: 64MB
    effective_cache_size: 192MB
    maintenance_work_mem: 16MB
    checkpoint_completion_target: "0.9"
    wal_buffers: 1966kB
    default_statistics_target: "100"
    random_page_cost: "1.1"
    effective_io_concurrency: "300"
    work_mem: 1129kB
    huge_pages: "off"
    min_wal_size: 1GB
    max_wal_size: 4GB
    archive_timeout: "900"

backup:
  enabled: true

secretManager: {}
  # Expected values:
  # accessKeyId: string (not base64-encoded)
  # secretAccessKey: string (not base64-encoded)

cloudflare:
  originCertName: cloudflare-origin-ca
